(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/noun_pause_170042.ca1bcf06.svg"},function(e,t,n){e.exports=n.p+"static/media/noun_play_170039.614647a2.svg"},function(e,t,n){e.exports=n.p+"static/media/noun_restart_170019.8311a56a.svg"},function(e,t,n){e.exports=n.p+"static/media/github.ddc25012.svg"},,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),r=n(5),a=n.n(r),o=(n(19),n(20),n(13)),s=n(2),u=n(3),l=n(1),d=function(e){var t=e.timeElapsedSeconds,n=Math.floor(t/60),i=t%60;return Object(l.a)("div",{css:{fontSize:"0.8rem",display:"flex",alignItems:"center",justifyContent:"center"}},"".concat(n,":").concat(i)," M")};function m(e){var t=e.startNewGame,n=e.gameState;return Object(l.a)("div",{css:{position:"absolute",top:0,left:0,height:"100%",width:"100%"}},Object(l.a)("div",{css:{color:"#000",display:"flex",flexDirection:"column",height:"100%",width:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(179, 179, 179, 0.4)"}},n.isGameOver?Object(l.a)("div",{className:"game-over"},Object(l.a)("div",{className:"title"},"GAME OVER!"),Object(l.a)("div",null,"Lines Completed: ",n.score/x),Object(l.a)("div",null,"Score: ",n.score),Object(l.a)("div",null,"Time Played: ",Object(l.a)(d,{timeElapsedSeconds:n.timeElapsedSeconds}))):null,Object(l.a)("div",{className:"new-game"},Object(l.a)("button",{onClick:t,css:{marginBottom:20,marginTop:20}},": NEW GAME :"))))}var v,P=n(7),f=n(8);!function(e){e.GLOW="",e.SEMITRANSPARENT=""}(v||(v={}));var p=["color-1","color-2","color-3","color-4","color-4"],b=function(){function e(t,n,i,c,r){Object(P.a)(this,e),this.key=t,this.description=n,this.blocks=i,this.rows=c,this.columns=r}return Object(f.a)(e,[{key:"toString",value:function(){return this.key}},{key:"getInstance",value:function(e){return{type:this,key:this.key,description:this.description,blocks:this.getBlockPieceFromMatrix(e),currentRows:this.rows,currentColumns:this.columns}}},{key:"getBlockPieceFromMatrix",value:function(e){return this.blocks.map((function(t,n){return t.map((function(t,n){return t?{color:e}:null}))}))}}],[{key:"values",value:function(){return[e.O_SHAPE,e.T_SHAPE,e.I_SHAPE,e.L_SHAPE,e.J_SHAPE,e.Z_SHAPE,e.S_SHAPE]}}]),e}();b.O_SHAPE=new b("O_SHAPE","A square piece",[[1,1],[1,1]],2,2),b.T_SHAPE=new b("T_SHAPE","A T shaped piece",[[1,1,1],[0,1,0]],2,3),b.I_SHAPE=new b("I_SHAPE","An I shaped piece",[[1],[1],[1],[1]],4,1),b.L_SHAPE=new b("L_SHAPE","An L shaped piece",[[1,0],[1,0],[1,1]],3,2),b.J_SHAPE=new b("J_SHAPE","An J shaped piece",[[0,1],[0,1],[1,1]],3,2),b.Z_SHAPE=new b("Z_SHAPE","An Z shaped piece",[[1,1,0],[0,1,1]],2,3),b.S_SHAPE=new b("S_SHAPE","An S shaped piece",[[0,1,1],[1,1,0]],2,3);var g=function(){var e=Math.floor(10*Math.random()%b.values().length),t=Math.floor(10*Math.random()%p.length);return b.values()[e].getInstance(p[t])};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e,t){switch(t.type){case"ADD_PIECE":var n=t.payload,i={row:0,column:Math.floor(e.blockMatrix[0].length/2)-1};return O({},e,{activePiece:n,activePiecePosition:i,readyForNewPiece:!1,currentOutputMatrix:y(e.blockMatrix,n?n.blocks:[],i)});case"MERGE_PIECE_IN_MATRIX":var c=y(e.blockMatrix,e.activePiece?e.activePiece.blocks:[],e.activePiecePosition),r=c.filter((function(e){return e.every((function(e){return e}))}));return r.length&&(c=_(c)),O({},e,{activePiece:null,activePiecePosition:{row:0,column:0},blockMatrix:c,currentOutputMatrix:c,readyForNewPiece:!0,completedRowsCount:r.length,eventHandlingInProgress:!1});case"LOCK_EVENT_HANDLING":return O({},e,{eventHandlingInProgress:!0});case"UNLOCK_EVENT_HANDLING":return O({},e,{eventHandlingInProgress:!1});case"MOVE_PIECE_TO_LEFT":var a={row:e.activePiecePosition.row,column:e.activePiecePosition.column-1};return O({},e,{activePiecePosition:a,currentOutputMatrix:y(e.blockMatrix,e.activePiece?e.activePiece.blocks:[],a),eventHandlingInProgress:!1});case"MOVE_PIECE_TO_RIGHT":var o={row:e.activePiecePosition.row,column:e.activePiecePosition.column+1};return O({},e,{activePiecePosition:o,currentOutputMatrix:y(e.blockMatrix,e.activePiece?e.activePiece.blocks:[],o),eventHandlingInProgress:!1});case"MOVE_PIECE_DOWN":if(!e.activePiece)return e;var s={row:e.activePiecePosition.row+1,column:e.activePiecePosition.column};return O({},e,{activePiecePosition:s,currentOutputMatrix:y(e.blockMatrix,e.activePiece.blocks,s),eventHandlingInProgress:!1});case"MATRIX_FULL":return O({},e,{activePiece:null,matrixFull:!0,readyForNewPiece:!1});case"RESET_MATRIX":return O({},t.payload);case"ROTATE_PIECE":var u=t.payload,l=e.activePiece?O({},e.activePiece,{blocks:u,currentRows:u.length,currentColumns:u[0].length}):null;return O({},e,{activePiece:l,currentOutputMatrix:y(e.blockMatrix,u,e.activePiecePosition),eventHandlingInProgress:!1});default:return e}},w=function(e,t){return new Array(e).fill(0).map((function(){return new Array(t).fill(null)}))},y=function(e,t,n){for(var i=t.length,c=t[0].length,r=j(e),a=0;a<i;a++)for(var o=0;o<c;o++)r[n.row+a][n.column+o]=t[a][o]||r[n.row+a][n.column+o];return r},_=function(e){var t=e.filter((function(e){return e.some((function(e){return!e}))}));if(t.length<e.length){var n=e.length-t.length;return w(n,t[0].length).concat(t)}return t},j=function(e){return e.map((function(e){return e.map((function(e){return e}))}))},k=(n(21),function(e){var t=e.piece;return c.a.createElement("div",{style:{marginBottom:20,textAlign:"center"}},c.a.createElement("div",null,t.blocks.map((function(e,t){return c.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"center"}},e.map((function(e,t){return c.a.createElement("div",{className:e?"block ".concat(e.color):"",key:t,style:{width:16,height:16}})})))}))))}),A=n(9),C=n.n(A),I=n(10),G=n.n(I),M=n(11),N=n.n(M);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=100,T={isGameRunning:!1,isGamePaused:!1,isGameOver:!1,score:0,timeElapsedSeconds:0},H=function(e,t){switch(t.type){case"START_NEW_GAME":return R({},e,{isGameRunning:!0,isGamePaused:!1,isGameOver:!1,timeElapsedSeconds:0,score:0});case"PAUSE_GAME":return R({},e,{isGameRunning:!1,isGamePaused:!0});case"RESUME_GAME":return R({},e,{isGameRunning:!0,isGamePaused:!1});case"GAME_OVER":return R({},e,{isGameRunning:!1,isGamePaused:!1,isGameOver:!0});case"INCREMENT_SCORE_FOR_N_LINES":return R({},e,{score:e.score+t.payload*x});case"UPDATE_TIME":return R({},e,{timeElapsedSeconds:t.payload?t.payload:e.timeElapsedSeconds+1});default:return e}},L=function(e){var t=e.rows,n=void 0===t?20:t,c=e.columns,r=void 0===c?10:c,a=Object(i.useRef)(0),u=Object(i.useCallback)((function(){p({type:"GAME_OVER"})}),[]),v=Object(i.useReducer)(H,T),P=Object(s.a)(v,2),f=P[0],p=P[1],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=Object(i.useReducer)(h,null,(function(){return{blockMatrix:w(e,t),currentOutputMatrix:w(e,t),activePiece:void 0,activePiecePosition:{row:0,column:0},completedRowsCount:0,matrixFull:!1,readyForNewPiece:!1,eventHandlingInProgress:!1}})),r=Object(s.a)(c,2),a=r[0],o=r[1],u=Object(i.useCallback)((function(n,i){if(!n)return!1;var c=n.length,r=n[0].length;if(!(i.column+r>t||i.row+c>e)){for(var o=i.row,s=0;o<i.row+c;o++,s++)for(var u=i.column,l=0;u<i.column+r;u++,l++)if(n[s][l]&&a.blockMatrix[o][u])return!1;return!0}}),[t,e,a.blockMatrix]),l=Object(i.useCallback)((function(){if(a.eventHandlingInProgress||!a.activePiece)return!1;o({type:"LOCK_EVENT_HANDLING"});var e={row:a.activePiecePosition.row+1,column:a.activePiecePosition.column};return u(a.activePiece.blocks,e)?(console.debug("spce down available"),o({type:"MOVE_PIECE_DOWN"})):(console.debug("no spce down available, merging now"),o({type:"MERGE_PIECE_IN_MATRIX"})),!0}),[u,a.activePiece,a.activePiecePosition.column,a.activePiecePosition.row,a.eventHandlingInProgress]),d=Object(i.useCallback)((function(e){console.debug("in add piece..",e);if(function(e){for(var t=3===e.currentColumns||4===e.currentColumns?4:5,n=t+e.currentColumns,i=0;i<e.currentRows;i++)for(var c=t;c<n;c++)if(a.blockMatrix[i][c])return!1;return!0}(e))return e.blocks.forEach((function(t,n){t.forEach((function(t,i){t&&(t.key="".concat(e.id,"-").concat(n,"-").concat(i))}))})),void o({type:"ADD_PIECE",payload:e});o({type:"MATRIX_FULL",payload:e}),n()}),[n,a.blockMatrix]),m=Object(i.useCallback)((function(){if(!a.activePiece||0===a.activePiecePosition.column||a.eventHandlingInProgress)return!1;o({type:"LOCK_EVENT_HANDLING"});for(var e=a.activePiecePosition.column-1,t=a.activePiecePosition.row,n=a.activePiecePosition.row+a.activePiece.currentRows-1,i=t;i<=n;i++)if(a.blockMatrix[i][e])return o({type:"UNLOCK_EVENT_HANDLING"}),!1;o({type:"MOVE_PIECE_TO_LEFT"})}),[a.activePiece,a.activePiecePosition.column,a.activePiecePosition.row,a.blockMatrix,a.eventHandlingInProgress]),v=Object(i.useCallback)((function(){if(a.eventHandlingInProgress||!a.activePiece||a.activePiecePosition.column+a.activePiece.currentColumns>=t)return!1;o({type:"LOCK_EVENT_HANDLING"});for(var e=a.activePiecePosition.column+a.activePiece.currentColumns,n=a.activePiecePosition.row,i=a.activePiecePosition.row+a.activePiece.currentRows-1,c=n;c<=i;c++)if(a.blockMatrix[c][e])return o({type:"UNLOCK_EVENT_HANDLING"}),!1;o({type:"MOVE_PIECE_TO_RIGHT"})}),[t,a.activePiece,a.activePiecePosition.column,a.activePiecePosition.row,a.blockMatrix,a.eventHandlingInProgress]),P=Object(i.useCallback)((function(){if(a.eventHandlingInProgress||!a.activePiece)return!1;o({type:"LOCK_EVENT_HANDLING"});var e=a.activePiece.blocks||[],t=e[0].map((function(t,n){return e.map((function(e){return e[n]})).reverse()}));u(t,a.activePiecePosition)?o({type:"ROTATE_PIECE",payload:t}):o({type:"UNLOCK_EVENT_HANDLING"})}),[u,a.activePiece,a.activePiecePosition,a.eventHandlingInProgress]),f=function(){o({type:"RESET_MATRIX",payload:{blockMatrix:w(e,t),currentOutputMatrix:w(e,t),activePiece:void 0,activePiecePosition:{row:0,column:0},completedRowsCount:0,matrixFull:!1,readyForNewPiece:!0,eventHandlingInProgress:!1}})};return[a,d,m,v,l,P,f]}(n,r,u),E=Object(s.a)(b,7),O=E[0],y=E[1],_=E[2],j=E[3],A=E[4],I=E[5],M=E[6],S=Object(i.useState)([g(),g(),g()]),R=Object(s.a)(S,2),x=R[0],L=R[1],D=Object(i.useCallback)((function(){var e=x.pop();e&&(e.id=++a.current,y(e),L([g()].concat(Object(o.a)(x))))}),[y,x]),F=Object(i.useCallback)((function(){M(),p({type:"START_NEW_GAME"})}),[M]),V=Object(i.useCallback)((function(){p({type:f.isGamePaused?"RESUME_GAME":"PAUSE_GAME"})}),[f.isGamePaused]),U=Object(i.useCallback)((function(e){if(e.preventDefault(),!f.isGamePaused)switch(e.key){case"ArrowLeft":_();break;case"ArrowRight":j();break;case"ArrowDown":A();break;case"ArrowUp":case"space":I()}}),[f.isGamePaused,A,_,j,I]);return Object(i.useEffect)((function(){if(f.isGameRunning){var e=setInterval((function(){A()}),1e3);return function(){clearInterval(e)}}}),[f.isGameRunning,A]),Object(i.useEffect)((function(){if(f.isGameRunning){var e=setInterval((function(){p({type:"UPDATE_TIME"})}),1e3);return function(){clearInterval(e)}}}),[f.isGameRunning]),Object(i.useEffect)((function(){return window.addEventListener("keydown",U),function(){window.removeEventListener("keydown",U)}}),[U]),Object(i.useEffect)((function(){O.readyForNewPiece&&D()}),[D,O.readyForNewPiece]),Object(i.useEffect)((function(){p({type:"INCREMENT_SCORE_FOR_N_LINES",payload:O.completedRowsCount})}),[O.completedRowsCount]),Object(l.a)("div",{css:{position:"relative",height:"40rem",width:"25rem",margin:"0 auto"}},Object(l.a)("div",{css:{backgroundColor:"#eee",border:"4px solid #CCC",padding:"0.5rem",display:"grid",gridTemplateColumns:"auto 4rem",gridTemplateRows:"auto 2rem",gridGap:2,height:"100%",width:"100%"}},Object(l.a)("div",{css:{display:"grid",gridTemplateColumns:"repeat(".concat(r,", 1fr)"),gridTemplateRows:"repeat(".concat(n,", 1fr)"),gridGap:1}},O.currentOutputMatrix&&O.currentOutputMatrix.map((function(e,t){return e.map((function(e,n){return Object(l.a)("div",{className:"block ".concat(e?" active "+e.color:""),key:e?e.key:"".concat(t,"-").concat(n)})}))}))),Object(l.a)("div",{css:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"space-between"}},Object(l.a)("div",{css:{display:"flex",flexDirection:"column-reverse",paddingTop:"1rem"}},(f.isGameRunning||f.isGamePaused)&&Object(l.a)("div",null,Object(l.a)("div",{css:{fontSize:"0.5rem",marginBottom:"1rem"}},"NEXT"),x.map((function(e,t){return Object(l.a)(k,{key:t,piece:e})})))),Object(l.a)("div",{css:{display:"flex",flexDirection:"column-reverse"}},Object(l.a)("button",{css:{border:"1px solid #ccc",margin:"0.5rem"},title:f.isGamePaused?"Resume Game":"Pause Game",onClick:V},Object(l.a)("img",{src:f.isGamePaused?G.a:C.a,width:"40",height:"32",alt:f.isGamePaused?"Resume Game":"Pause Game"})),Object(l.a)("button",{css:{border:"1px solid #ccc",margin:"0.5rem"},title:"Restart Game",onClick:F},Object(l.a)("img",{src:N.a,width:"40",height:"32",alt:"Restart Game"})))),(f.isGameRunning||f.isGamePaused)&&Object(l.a)("div",{css:{fontSize:"0.8rem",display:"flex",alignItems:"center",justifyContent:"center"}},Object(l.a)("img",{src:"./assets/noun_Diamond_170032.svg",width:"40",height:"22",alt:"score"})," ",f.score),(f.isGameRunning||f.isGamePaused)&&Object(l.a)(d,{timeElapsedSeconds:f.timeElapsedSeconds})),Object(l.a)("div",{hidden:!f.isGamePaused,css:{marginBottom:"1rem",position:"absolute",top:"50%",left:"calc(50% - 90px)",padding:"1rem",background:"rgba(0,0,0,0.4)",color:"white",fontSize:"1rem"}},"PAUSED"),!f.isGameRunning&&!f.isGamePaused&&Object(l.a)("div",null,Object(l.a)(m,{gameState:f,startNewGame:F})))};L.defaultProps={rows:20,columns:10};var D=L,F=n(12),V=n.n(F),U=function(){return Object(l.a)("div",{css:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column",overflowX:"hidden"}},Object(l.a)("div",{css:{height:50,color:"#CCC",fontWeight:"bold",padding:4,display:"flex",justifyContent:"flex-end"}},"SLICK TETRIS Beta 0.1"," ",Object(l.a)("a",{href:"https://github.com/nitinja/slick-tetris"},Object(l.a)("img",{src:V.a,alt:"Github Codebase",css:{width:"1rem",height:"1rem",margin:"0 1rem"}}))),Object(l.a)("div",{css:{flex:1}},Object(l.a)(D,{rows:20,columns:10})),Object(l.a)("div",{css:{color:"#ccc",backgroundColor:"#eeeeee47",fontWeight:"normal",padding:4,display:"flex",justifyContent:"flex-end"}},Object(l.a)("span",{"aria-label":"peace",role:"img"},"a game by \xa0",Object(l.a)("a",{href:"http://nitinj.com"},"NJ")," \ud83c\udf3f")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.2828aab5.chunk.js.map